1. Зарегистрироваться на сайте системы [https://www.robokassa.ru/](https://www.robokassa.ru/).
2. Войти в личный кабинет системы Robokassa и в разделе "Мои магазины" нажать кнопку "Добавить новый". Заполнить все поля, включая "Наименование магазина", "URL главной страницы" и т.д.
3. Далее Вы попадете в раздел "Технические настройки". В данном разделе необходимо указать следующие параметры:
    - Алгоритм расчета хеша - MD5
    - Сгенерировать или ввести "Пароль #1" и "Пароль #2". Скопировать пароли в отдельный временный файл.
    - Result Url - Ввести ``http://[адрес вашего сайта]/omnipay_notify``.
    - Success Url - ``http://[адрес вашего сайта]/pages/payment_success``. Позже мы создадим данную страницу.
    - Метод отсылки данных по Success Url - POST.
    - Fail Url - ``http://[адрес вашего сайта]/pages/payment_fail``. Позже мы создадим данную страницу.
    - Метод отсылки данных по Fail Url - POST.

    В разделе "Параметры проведения тестовых платежей":
    - Алгоритм расчета хеша - MD5.
    - Сгенерировать или ввести "Пароль #1" и "Пароль #2". Скопировать пароли в отдельный временный файл.
4. Войти в интерфейс администратора Вашего сайта ``http://[адрес вашего сайта]/admin/``. Перейти в раздел "Каталог".
5. Создать категорию "Статичные страницы" с системным именем "pages". Тип контента - Текстовая страница. Снять флажок "Активный" (это будет не активный раздел, но с активными страницами).
6. Далее в данной категории создать страницу "Успешная оплата" с системным именем "payment_success". Пример контента страницы: ``Спасибо! Ваша оплата успешно принята.``.
7. В этой же категории создать страницу "Оплата не закончена" с системным именем "payment_fail". Пример контента страницы: ``Во время оплаты произошла ошибка или у вас недостаточно средств. Пожалуйста, проверьте доступность средств на вашем счете или измените способ оплаты.``.
8. Перейти в раздел "Шаблоны", открыть для редактирования конфигурационный файл "omnipay.yaml". Проскроллить вниз до блока "RoboKassa". Ввести данные Вашего магазина в системе Robokassa. ``purse`` - Идентификатор магазина, ``secretKey`` - тестовый Пароль #1, ``secretKey2`` - тестовый Пароль #2. Проверить чтобы был включен тестовый режим: ``testMode: true``. Остальные параметры можно оставить без изменений. Включить флажок "Очистить системный кэш" и нажать кнопку "Сохранить".
9. В разделе "Настройки" должен быть такой метод оплаты: Название - "Банковские карты и электронные деньги" (можно менять), Значение - ``RoboKassa`` (нельзя менять).
10. Также в настройках необходимо ввести значения для параметров: "Система налогообложения магазина (СНО) (app.tax_system)" (например ``usn_income``), "Ставка НДС (app.nds_rate)" (например ``vat20``), "Способ расчёта (app.payment_method)" (например ``full_prepayment``), "Предмет расчёта (app.payment_object)" (например ``commodity``), "Название параметра со списком товаров (app.receipt_option_name)" - ``receipt`` (не менять, все буквы в нижнем регистре). Подробнее о данных параметрах в документации - [https://docs.robokassa.ru/](https://docs.robokassa.ru/).
11. Авторизоваться на Вашем сайте, совершить покупку и перейти к оплате. В тестовом режиме на сайте платежной системы можно выбрать способ оплаты и нажать кнопку "Успешная оплата". В этом случае Вы должны увидеть на сайте (в разделе "Заказы" интерфейса администратора или в разделе "История заказов" пользователя) изменение статуса оплаты заказа. Если ничего не произошло, можно посмотреть журнал сообщений и ошибок в файле ``/var/log/prod.log``.
12. После успешного тестирования Вам нужно отправить запрос на активацию магазина в личном кабинете системы Robokassa. Также необходимо ввести рабочие "Пароль #1" (secretKey) и "Пароль #2" (secretKey2) в конфигурационном файле ``omnipay.yaml`` (раздел "Шаблоны"). Выключить тестовый режим - ``testMode: false``. Сохранить конфигурационный файл с включенным флажком "Очистить системный кэш".
13. После активации магазина проверьте оплату с реальными деньгами (можно временно поставить минимальную цену товара).